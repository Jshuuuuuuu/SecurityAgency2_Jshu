<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Personnel Page</title>
    
    <link rel="stylesheet" href="/front/Personnel/person.css">
    <script src="/front/Personnel/index.js" defer></script>

</head>
<body>
    <div class="container">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="logo">
                <img src="/front/images/RQA_logo.jpg" alt="ROA Agency">
            </div>
            <nav>
                <ul>
                    <li><a href="/front/purpose/purpose.html"><img src="/front/icon/institution-icon.png" alt="Purpose Icon"> Purpose</a></li>
                    <li><a href="/front/Personnel/personpage.html"><img src="/front/icon/employee-icon.png" alt="Employee Icon"> Personnel</a></li>  
                    <li><a href="/front/contract/contractpage.html"><img src="/front/icon/contract-icon.png" alt="Contract Icon"> Contract</a></li>
                    <li><a href="/front/payslip/payslippage.html"><img src="/front/icon/payslip-icon.png" alt="Pay Slip Icon"> Pay Slip</a></li>
                </ul>
              </nav>
          </div>

        <!-- Main Content -->
        <div class="main-content">
            <div class="header">
                <h1>PERSONNEL PAGE</h1>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <h2>Search Personnel</h2>
                </div>
                <div class="card-body">
                    <form id="searchForm">
                        <div class="form-group">
                            <label for="search">Search by Name or ID</label>
                            <input type="text" id="search" name="search" placeholder="Enter Personnel ID or Name">
                        </div>
                        <div class="button-container">
                            <button type="button" class="bn632-hover bn25" onclick="searchPersonnel()">Search</button>
                        </div>
                    </form>
                </div>
            </div>

        
            <div class="card">
                <div class="card-header">
                    <h2>Update Personnel</h2>
                </div>
                <div class="card-body">
                    <details>
                        <summary style="cursor: pointer; padding: 10px; background-color: #1e3a8a; color: white; border-radius: 8px;">Click to Update Personnel</summary>
                        <form id="personnelForm" style="margin-top: 20px;">
                            <div class="form-container">
                                <!-- Left Side: Name, Age, Civil Status, Gender -->
                                <div class="form-section">
                                    <div class="form-group">
                                        <label for="name">Name</label>
                                        <input type="text" id="name" name="name" placeholder="Enter Name" required>
                                    </div>
                            
                                    <div class="form-group">
                                        <label for="age">Age</label>
                                        <input type="number" id="age" name="age" placeholder="Enter Age" required>
                                    </div>
                            
                                    <div class="form-group">
                                        <label for="civilStatus">Civil Status</label>
                                        <select id="civilStatus" name="civilStatus" required>
                                            <option value="1">Single</option>
                                            <option value="2">Married</option>
                                            <option value="3">Widowed</option>
                                        </select>
                                    </div>
                            
                                    <div class="form-group">
                                        <label for="gender">Gender</label>
                                        <select id="gender" name="gender" required>
                                            <option value="1">Male</option>
                                            <option value="2">Female</option>
                                            <option value="3">Others</option>
                                        </select>
                                    </div>
                                </div>
                            
                                <!-- Right Side: Address -->
                                <div class="form-section">
                                    <div class="form-group">
                                        <label for="street">Street</label>
                                        <input type="text" id="street" name="street" placeholder="Enter Street" required>
                                    </div>
                            
                                    <div class="form-group">
                                        <label for="barangay">Barangay</label>
                                        <input type="text" id="barangay" name="barangay" placeholder="Enter Barangay">
                                    </div>
                            
                                    <div class="form-group">
                                        <label for="city">City</label>
                                        <input type="text" id="city" name="city" placeholder="Enter City" required>
                                    </div>
                            
                                    <div class="form-group">
                                        <label for="province">Province</label>
                                        <input type="text" id="province" name="province" placeholder="Enter Province" required>
                                    </div>
                            
                                    <div class="form-group">
                                        <label for="zipcode">Zip Code</label>
                                        <input type="text" id="zipcode" name="zipcode" placeholder="Enter Zip Code" required>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="button-container">
                                <button type="submit" class="bn632-hover bn25">Save</button>
                                <button type="reset" class="bn632-hover bn25">Clear</button>
                                <button type="button" class="bn632-hover bn25" onclick="deletePersonnel()">Delete</button>
                            </div>
                        </form>
                    </details>
                </div>
            </div>
            

            <div class="card">
                <div class="card-header">
                    <h2>Personnel Data Grid</h2>
                </div>
                <div class="card-body">
                    <table style="width: 100%; border-collapse: collapse;">
                        <thead>
                            <tr style="background-color: #1e3a8a; color: white;">
                                <th style="padding: 10px; text-align: left;">Personnel ID</th>
                                <th style="padding: 10px; text-align: left;">Name</th>
                                <th style="padding: 10px; text-align: left;">Age</th>
                                <th style="padding: 10px; text-align: left;">Civil Status</th>
                                <th style="padding: 10px; text-align: left;">Gender</th>
                                <th style="padding: 10px; text-align: left;">Address</th>
                                <th style="padding: 10px; text-align: left;">Contact Number</th>
                                <th style="padding: 10px; text-align: left;">Email</th>
                            </tr>
                        </thead>
                        <tbody id="personnelData">
                            <!-- Data from MySQL will be inserted here -->
                        </tbody>
                    </table>
                </div>
            </div>

        </div>
    </div>

    <script>
        function fetchPersonnel() {
            fetch('http://localhost:5000/getPersonnel')
                .then(response => response.json())
                .then(data => {
                    let tableBody = document.getElementById('personnelData');
                    tableBody.innerHTML = "";
                    data.forEach(person => {
                        let row = `<tr>
                            <td>${person.Personnel_ID}</td>
                            <td>${person.Personnel_Name}</td>
                            <td>${person.Personnel_Age}</td>
                            <td>${person.CivilStatus}</td>
                            <td>${person.Gender}</td>
                            <td>${person.Street}, ${person.Barangay}, ${person.City}, ${person.Province}, ${person.Zipcode}</td>
                            <td>${person.ContactNo}</td>
                            <td>${person.Email}</td>
                        </tr>`;
                        tableBody.innerHTML += row;
                    });
                })
                .catch(error => console.error('Error fetching personnel:', error));
        }

        function searchPersonnel() {
            let searchValue = document.getElementById('search').value;
            console.log("Search:", searchValue);
            // Implement fetch request to filter personnel
        }

        function deletePersonnel() {
            console.log("Delete personnel function triggered");
            // Implement deletion logic
        }

        // Load personnel data on page load
        window.onload = fetchPersonnel;
    </script>

</body>
</html>
